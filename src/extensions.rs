use maplit::hashmap;
use crate::error::RosettaError;
use std::error::*;

pub fn get_extension(lang: &str) -> Result<String, Box<dyn Error>>
{
let language_suffixes= hashmap![
 "0815" => "0815",
 "11l" => "11l",
 "360-assembly" => "360",
 "4d" => "4d",
 "4dos-batch" => "4dos",
 "6502-assembly" => "6502",
 "68000-assembly" => "68000",
 "6800-assembly" => "6800",
 "8051-assembly" => "8051",
 "8080-assembly" => "8080",
 "8086-assembly" => "8086",
 "8th" => "8th",
 "abap" => "abap",
 "acl2" => "acl2",
 "actionscript" => "as",
 "acurity-architect" => "acurityscript", // ref: https://benbos67.wordpress.com/2013/07/30/an-ide-for-acurity/
 "ada" => "ada",
 "agda" => "agda",
 "agena" => "agena",
 "aikido" => "aikido",
 "aime" => "aime",
 "algae" => "algae",
 "algol-60" => "alg",
 "algol-68" => "alg",
 "algol-m" => "algol-m",
 "algol-w" => "alg",
 "alore" => "alore",
 "ambienttalk" => "ambient",
 "amigae" => "amiga",
 "ampl" => "ampl",
 "antlang" => "antlang",
 "antlr" => "antlr",
 "apex" => "apex",
 "apl" => "apl",
 "app-inventor" => "app",
 "applescript" => "applescript",
 "applesoft-basic" => "applesoft",
 "apricot" => "apricot",
 "arbre" => "arbre",
 "arc" => "arc",
 "argile" => "argile",
 "arm-assembly" => "arm",
 "aspectj" => "aspectj",
 "assembly" => "least-common-multiple.as",
 "astro" => "astro",
 "asymptote" => "asymptote",
 "ats" => "ats",
 "autohotkey" => "ahk",
 "autoit" => "autoit",
 "autolisp" => "autolisp",
 "awk" => "awk",
 "axe" => "axe",
 "axiom" => "axiom",
 "b4j" => "b4j",
 "babel" => "pb",
 "bacon" => "bacon",
 "basic256" => "basic256",
 "basic" => "basic",
 "batch-file" => "bat",
 "battlestar" => "battlestar",
 "bbc-basic" => "bbc",
 "bc" => "bc",
 "bcpl" => "bcpl",
 "beeswax" => "beeswax",
 "befunge" => "bf",
 "biferno" => "biferno",
 "blast" => "blast",
 "blitzmax" => "blitz",
 "bml" => "bml",
 "boo" => "boo",
 "bori" => "bori",
 "brace" => "brace",
 "bracmat" => "bracmat",
 "brainf---" => "bf",
 "brat" => "brat",
 "brlcad" => "brlcad",
 "burlesque" => "blq",
 "c1r" => "c1r",
 "cache-objectscript" => "cos",
 "cafeobj" => "cafeobj",
 "cat" => "cat",
 "c" => "c",
 "c++-cli" => "cpp",
 "c++" => "cpp",
 "cduce" => "cduce",
 "ceylon" => "ceylon",
 "chapel" => "chapel",
 "chef" => "chef",
 "chuck" => "chuck",
 "clarion" => "clarion",
 "clay" => "clay",
 "clean" => "clean",
 "clio" => "clio",       // implied by download button at https://clio-lang.org/
 "clipper" => "clipper",
 "clipper-xbase++" => "clipper",
 "clips" => "clips",
 "clojure" => "clj",
 "cmake" => "cmake",
 "cobol" => "cobol",
 "cobra" => "cobra",
 "coco" => "coco",
 "coffeescript" => "coffee",
 "coldfusion" => "cfm",
 "comal" => "comal",
 "comefrom0x10" => "comefrom0x10",
 "commodore-basic" => "commodore",
 "common-lisp" => "lisp",
 "component-pascal" => "component",
 "computer-zero-assembly" => "computer",
 "coq" => "coq",
 "crack" => "crack",
 "crystal" => "crystal",
 "c-sharp" => "cs",
 "curry" => "curry",
 "dafny" => "dafny",
 "dao" => "dao",
 "dart" => "dart",
 "dc" => "dc",
 "dcl" => "dcl",
 "d" => "d",
 "ddnc" => "ddnc",
 "deja-vu" => "djv",
 "delphi" => "delphi",
 "deluge" => "deluge",
 "div-games-studio" => "div",
 "dm" => "dm",
 "dms" => "dms",
 "dodo0" => "dodo0",
 "dup" => "dup",
 "dwscript" => "dw",
 "dylan" => "dylan",
 "ec" => "ec",
 "echolisp" => "echolisp",
 "ecl" => "ecl",
 "edsac-order-code" => "edsac",
 "e" => "e",
 "eero" => "eero",
 "efene" => "efene",
 "egison" => "egison",
 "egel" => "egel",    // just a guess
 "egl" => "egl",
 "eiffel" => "e",
 "ela" => "ela",
 "elastic" => "elastic",
 "elena" => "elena",
 "elisa" => "elisa",
 "elixir" => "elixir",
 "ella" => "ella",
 "elm" => "elm",
 "emacs-lisp" => "l",
 "erlang" => "erl",
 "erre" => "erre",
 "esql" => "esql",
 "euler-math-toolbox" => "euler",
 "euphoria" => "euphoria",
 "excel" => "excel",
 "ezhil" => "ezhil",
 "factor" => "factor",
 "falcon" => "falcon",
 "false" => "false",
 "fancy" => "fancy",
 "fan" => "fan",
 "fantom" => "fantom",
 "fbsl" => "fbsl",
 "felix" => "felix",
 "ferite" => "ferite",
 "fexl" => "fexl",
 "fish" => "fish",
 "focal" => "focal",
 "formulaone" => "formulaone",
 "forth" => "fth",
 "fortran" => "f",
 "fortress" => "fortress",
 "fp" => "fp",
 "freebasic" => "freebasic",
 "free-pascal" => "free",
 "frege" => "frege",
 "friendly-interactive-shell" => "fish",
 "frink" => "frink",
 "frisc-assembly" => "frisc",
 "f-sharp" => "fs",
 "funl" => "funl",
 "futhark" => "futhark",
 "futurebasic" => "futurebasic",
 "fuze-basic" => "fuze",
 "gambas" => "gambas",
 "gap" => "gap",
 "gastona" => "gastona",
 "gdl" => "gdl",
 "gecho" => "gecho",
 "gema" => "gema",
 "gentee" => "gentee",
 "genyris" => "genyris",
 "george" => "george",
 "gfa-basic" => "gfa",
 "glagol" => "glagol",
 "glbasic" => "glbasic",
 "glee" => "glee",
 "glsl" => "glsl",
 "gml" => "gml",
 "gnuplot" => "gnuplot",
 "go" => "go",
 "golfscript" => "golf",
 "golo" => "golo",
 "gosu" => "gosu",
 "gri" => "gri",
 "groovy" => "groovy",
 "guiss" => "guiss",
 "gw-basic" => "gw-basic",
 "hack" => "hack",
 "halon" => "halon",
 "harbour" => "harbour",
 "haskell" => "hs",
 "haxe" => "haxe",
 "heron" => "heron",
 "hicest" => "hicest",
 "hla" => "hla",
 "holyc" => "holyc",
 "hoon" => "hoon",
 "hope" => "hope",
 "hpppl" => "hpppl",
 "hq9+" => "hq9p",
 "hy" => "hy",
 "hypertalk" => "ht",
 "icon" => "icon",
 "idl" => "idl",
 "idris" => "idris",
 "i" => "i",
 "inform-6" => "inf",
 "inform-7" => "inf",
 "informix-4gl" => "4gl",
 "integer-basic" => "integer",
 "intercal" => "ical",
 "io" => "io",
 "ioke" => "ioke",
 "iptscrae" => "iptscrae",
 "is-basic" => "isbasic", // just a guess 
 "iwbasic" => "iwbasic",
 "jack" => "jack",
 "jacquard-loom" => "jacquard",
 "james-ii-rule-based-cellular-automata" => "james",
 "javafx-script" => "javafx",
 "java" => "java",
 "javascript" => "js",
 "jcl" => "jcl",
 "j" => "j",
 "jocaml" => "jocaml",
 "jovial" => "jovial",
 "joy" => "joy",
 "jq" => "jq",
 "jscript.net" => "enumerations.net",
 "judoscript" => "judo",
 "julia" => "julia",
 "kamailio-script" => "kamailio",
 "kaya" => "kaya",
 "kite" => "kite",
 "kitten" => "kitten",
 "k" => "k",
 "klong" => "klong",
 "konsolscript" => "konsol",
 "kotlin" => "kotlin",
 "labview" => "labview",
 "lambda-prolog" => "lambda",
 "lambdatalk" => "lambdatalk",
 "lang5" => "lang5",
 "lasso" => "lasso",
 "latex" => "tex",
 "lc3-assembly" => "lc3",
 "lfe" => "lfe",
 "lhogho" => "lhogho",
 "liberty-basic" => "liberty",
 "libreoffice-basic" => "libreoffice",
 "lily" => "lily",
 "lilypond" => "lily",
 "limbo" => "limbo",
 "lingo" => "lingo",
 "lisaac" => "lisaac",
 "lisp" => "l",
 "livecode" => "livecode",
 "livescript" => "live",
 "l++" => "lpp",
 "llvm" => "llvm",
 "lobster" => "lobster",
 "locomotive-basic" => "locomotive",
 "logo" => "logo",
 "logtalk" => "logtalk",
 "lolcode" => "lol",
 "lotusscript" => "lotus",
 "lse64" => "lse64",
 "lsl" => "lsl",
 "lua" => "lua",
 "lucid" => "lucid",
 "luck" => "luck",
 "lush" => "lush",
 "m4" => "m4",
 "make" => "make",
 "malbolge" => "malbolge",
 "maple" => "maple",
 "mathematica" => "math",
 "mathprog" => "math",
 "matlab" => "m",
 "maude" => "maude",
 "maxima" => "maxima",
 "maxscript" => "max",
 "mbs" => "mbs",
 "mel" => "mel",
 "mercury" => "mercury",
 "metafont" => "metafont",
 "metapost" => "metapost",
 "minil" => "minil",
 "mips-assembly" => "mips",
 "mirah" => "mirah",
 "mirc-scripting-language" => "mirc",
 "ml-i" => "ml",
 "mlite" => "mlite",
 "mmix" => "mmix",
 "modula-2" => "mod2",
 "modula-3" => "mod3",
 "mond" => "mond",
 "monicelli" => "monicelli",
 "monkey" => "monkey",
 "monte" => "monte",
 "moo" => "moo",
 "moonscript" => "moon",
 "moonscript" => "moon",
 "morfa" => "morfa",
 "muf" => "muf",
 "mumps" => "mumps",
 "myrtlescript" => "myrtle",
 "mysql" => "sql",
 "mythryl" => "mythryl",
 "nasl" => "nasl",
 "neat" => "neat",
 "neko" => "neko",
 "nemerle" => "nemerle",
 "nesl" => "nesl",
 "netlogo" => "netlogo",
 "netrexx" => "netrexx",
 "newlisp" => "newlisp",
 "newtonscript" => "newton",
 "ngs" => "ngs",
 "nial" => "nial",
 "nickle" => "nickle",
 "nim" => "nim",
 "nit" => "nit",
 "niue" => "niue",
 "nix" => "nix",
 "nsis" => "nsis",
 "n-t-roff" => "n",
 "oasys-assembler" => "oasys",
 "oasys" => "oasys",
 "oberon-2" => "oberon-2",
 "objeck" => "objeck",
 "objective-c" => "m",
 "object-pascal" => "object",
 "ocaml" => "ocaml",
 "occam" => "occam",
 "octave" => "octave",
 "oforth" => "oforth",
 "ol" => "ol",
 "onyx" => "onyx",
 "ooc" => "ooc",
 "oorexx" => "rexx",
 "opa" => "opa",
 "openedge-progress" => "openedge",
 "openlisp" => "openlisp",
 "openscad" => "scad",
 "opl" => "opl",
 "order" => "order",
 "oxygenbasic" => "oxy",
 "oxygene" => "oxy",
 "oz" => "oz",
 "panda" => "panda",
 "pare" => "pare",
 "pari-gp" => "pari",
 "pascal" => "pascal",
 "pasm" => "pasm",
 "pdp-11-assembly" => "pdp-11",
 "peloton" => "peloton",
 "peoplecode" => "peoplecode",
 "perl5i" => "perl5i",
 "perl-6" => "pl6",
 "perl" => "pl",
 "phix" => "phix",
 "phl" => "phl",
 "php" => "php",
 "picat" => "picat",
 "picolisp" => "l",
 "pict" => "pict",
 "piet" => "piet",
 "pike" => "pike",
 "pilot" => "pilot",
 "pir" => "pir",
 "plaintex" => "tex",
 "pl-i" => "pli",
 "pl-m" => "plm",
 "pl-pgsql" => "sql",
 "pl-sql" => "sql",
 "pony" => "pony",
 "pop11" => "pop11",
 "postscript" => "ps",
 "potion" => "potion",
 "pov-ray" => "pov-ray",
 "powerbasic" => "powerbasic",
 "powerbuilder" => "powerbuilder",
 "powershell" => "psh",
 "prodos" => "dos",
 "prolog" => "pro",
 "psql" => "psql",
 "purebasic" => "purebasic",
 "pure-data" => "pure",
 "pure" => "pure",
 "purity" => "purity",
 "pyret" => "pyret",
 "python" => "py",
 "qi" => "qi",
 "qore" => "qore",
 "q" => "q",
 "quill" => "quill",
 "racket" => "rkt",
 "rapidq" => "rapidq",
 "rapira" => "rapira",
 "ra" => "ra",
 "rascal" => "rascal",
 "raven" => "raven",
 "realbasic" => "realbasic",
 "rebol" => "rebol",
 "red" => "red",
 "retro" => "retro",
 "rexx" => "rexx",
 "rhope" => "rhope",
 "ring" => "ring",
 "rlab" => "rlab",
 "robotic" => "robotic",
 "rpgiv" => "rpgiv",
 "rpg" => "rpg",
 "rpl-2" => "rpl",
 "rpl" => "rpl",
 "r" => "r",
 "rtl-2" => "rtl",
 "ruby" => "rb",
 "run-basic" => "run",
 "rust" => "rust",
 "sage" => "sage",
 "salmon" => "salmon",
 "sas" => "sas",
 "sather" => "sa",
 "scala" => "scala",
 "scheme" => "ss",
 "scilab" => "scilab",
 "scriptbasic" => "scriptbasic",
 "sed" => "sed",
 "seed7" => "seed7",
 "self" => "self",
 "sequencel" => "sequencel",
 "setl4" => "setl4",
 "set-lang" => "set",
 "setl" => "setl",
 "sheerpower-4gl" => "4gl",
 "shen" => "shen",
 "shiny" => "shiny",
 "sidef" => "sidef",
 "simpol" => "simpol",
 "simula" => "simula",
 "sinclair-zx81-basic" => "sinclair",
 "sisal" => "sisal",
 "skookumscript" => "skookum",
 "s-lang" => "slang",
 "slate" => "slate",
 "smalltalk" => "st",
 "smart-basic" => "smart",
 "smeql" => "smeql",
 "smilebasic" => "smilebasic",
 "snobol4" => "sno",
 "snobol" => "sno",
 "snusp" => "snusp",
 "soar" => "soar",
 "soneking-assembly" => "soneking",
 "spad" => "spad",
 "sparc-assembly" => "sparc",
 "sparkling" => "sparkling",
 "spark" => "spark",
 "spin" => "spin",
 "spl" => "spl",
 "sql" => "sql",
 "squirrel" => "nut",
 "ssem" => "ssem",
 "standard-ml" => "ml",
 "stata" => "stata",
 "streamit" => "streamit",
 "suneido" => "suneido",
 "supercollider" => "supercollider",
 "supernova" => "supernova",
 "swift" => "swift",
 "symsyn" => "symsyn",
 "systemverilog" => "v",
 "tcl" => "tcl",
 "techbasic" => "techbasic",
 "teco" => "teco",
 "terra" => "terra",
 "testml" => "testml",
 "ti-83-basic" => "ti-83",
 "ti-83-hex-assembly" => "ti-83",
 "ti-89-basic" => "ti-89",
 "tiscript" => "ti",
 "toffeescript" => "toffee",
 "toka" => "toka",
 "torquescript" => "torque",
 "tpp" => "tpp",
 "transact-sql" => "sql",
 "transforth" => "transforth",
 "trith" => "trith",
 "true-basic" => "true",
 "tse-sal" => "tse",
 "turing" => "turing",
 "tuscript" => "tu",
 "txr" => "txr",
 "typescript" => "type",
 "ubasic" => "ubasic",
 "unicon" => "unicon",
 "uniface" => "uniface",
 "unixpipes" => "unixpipes",
 "unix-shell" => "sh",
 "unlambda" => "unlambda",
 "ursala" => "ursala",
 "ursa" => "ursa",
 "vala" => "vala",
 "vax-assembly" => "vax",
 "vba" => "vba",
 "vbscript" => "vb",
 "vedit-macro-language" => "vedit",
 "verilog" => "v",
 "vhdl" => "vhdl",
 "vim-script" => "vim",
 "visual-basic-.net" => "visual",
 "visual-basic" => "vb",
 "visual-foxpro" => "visual",
 "visual-objects" => "vobj",
 "visual-prolog" => "pro",
 "viua-vm-assembly" => "viua",
 "vorpal" => "vorpal",
 "vox" => "vox",
 "v" => "v",
 "wart" => "wart",
 "whenever" => "whenever",
 "whitespace" => "ws",
 "wolfram-language" => "wolfram",
 "wollok" => "wollok",
 "wortel" => "wortel",
 "wrapl" => "wrapl",
 "wren" => "wren",
 "x86-assembly" => "x86",
 "xanadu" => "xanadu",
 "xeec" => "xeec",
 "xlisp" => "xlisp",
 "xl" => "xl",
 "xojo" => "xojo",
 "xpath-2.0" => "xpath",
 "xpl0" => "xpl0",
 "xproc" => "xproc",
 "xquery" => "xquery",
 "xslt-1.0" => "xslt",
 "xslt-2.0" => "xslt",
 "xslt" => "xslt",
 "xtalk" => "xtalk",
 "xul" => "xul",
 "yacas" => "yacas",
 "ya" => "ya",
 "yorick" => "yorick",
 "z80-assembly" => "z80",
 "zed" => "zed",
 "zkl" => "zkl",
 "zpl" => "zpl",
 "zx-spectrum-basic" => "zx"
];

    let lc_lang = lang.to_lowercase();
    let str_lang : &str = &lc_lang;

    let ext : Result<String, Box<dyn Error>> = language_suffixes.get(str_lang)
                             .map(|&st| st.to_owned())
                             .ok_or(Box::new(RosettaError::UnrecognizedLanguage(lang.to_owned())));
    match ext {
        Err(_) => {
                      println!("Could not find extension for language: {}", lc_lang);
                      Ok(lc_lang)
                  },
        Ok(_) => ext,
    }
}
